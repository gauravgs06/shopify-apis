import requests
import json
import time
import random
import string
from lib.apiClient import SyncAPIClient, RequestTask


def createDiscount(price_rule_id, url, headers=None, payload=None, params=None):
    RESOURCE_URL: str = "/price_rules/{price_rule_id}/batch.json"
    API_URL = url + RESOURCE_URL

    COUPON_LIST = [
        "TACXBAJAJODAZE","TACXBAJAJBLBIB","TACXBAJAJGSXXV","TACXBAJAJKKOJP","TACXBAJAJQKTSU","TACXBAJAJKODKU","TACXBAJAJXBMOB","TACXBAJAJHBZDX","TACXBAJAJZWZGF","TACXBAJAJGEMHA","TACXBAJAJZPLHA","TACXBAJAJWTKQR","TACXBAJAJYHBVI","TACXBAJAJMHARB","TACXBAJAJGLWJL","TACXBAJAJPCDMT","TACXBAJAJGDJTZ","TACXBAJAJAVCJH","TACXBAJAJDHBAV","TACXBAJAJZIFVE","TACXBAJAJEWHCK","TACXBAJAJWEQSK","TACXBAJAJLEKAJ","TACXBAJAJSZZYS","TACXBAJAJMECXW","TACXBAJAJREJBJ","TACXBAJAJUHYPU","TACXBAJAJAOLKC","TACXBAJAJBBSBH","TACXBAJAJLPLFC","TACXBAJAJSJXBR","TACXBAJAJLBCLS","TACXBAJAJBWPLH","TACXBAJAJPXKUS","TACXBAJAJUYBRT","TACXBAJAJKHEMZ","TACXBAJAJPTKFY","TACXBAJAJPVATF","TACXBAJAJQAHEU","TACXBAJAJHKNPT","TACXBAJAJHLWUX","TACXBAJAJKIKQA","TACXBAJAJEBBXO","TACXBAJAJMCHPI","TACXBAJAJICECM","TACXBAJAJGXQVB","TACXBAJAJEYDXN","TACXBAJAJLOISC","TACXBAJAJOVCCF","TACXBAJAJYGSPQ","TACXBAJAJDNBVF","TACXBAJAJZUYMM","TACXBAJAJVZIRU","TACXBAJAJGBPWV","TACXBAJAJWUBIZ","TACXBAJAJVUIRK","TACXBAJAJRDPCX","TACXBAJAJZWGPF","TACXBAJAJJPURJ","TACXBAJAJFKVKM","TACXBAJAJBIDUA","TACXBAJAJJUFWU","TACXBAJAJLOGHA","TACXBAJAJJHQDJ","TACXBAJAJPRGSN","TACXBAJAJXPGBZ","TACXBAJAJBHIDH","TACXBAJAJMWLAH","TACXBAJAJSSEAA","TACXBAJAJWFHLF","TACXBAJAJMNXAR","TACXBAJAJVIHCE","TACXBAJAJKKCGX","TACXBAJAJBZZBZ","TACXBAJAJRMGNU","TACXBAJAJYZKMS","TACXBAJAJVIUCU","TACXBAJAJUBROG","TACXBAJAJZSZHF","TACXBAJAJDTNQQ","TACXBAJAJMCTGC","TACXBAJAJQWMJW","TACXBAJAJJIALC","TACXBAJAJZJHSZ","TACXBAJAJSRTQB","TACXBAJAJBCFYH","TACXBAJAJFMMAT","TACXBAJAJYUXLT","TACXBAJAJTFMVL","TACXBAJAJJEMGK","TACXBAJAJKXHLD","TACXBAJAJRLVUX","TACXBAJAJAMYSY","TACXBAJAJBHYEJ","TACXBAJAJQGLBP","TACXBAJAJZJJJY","TACXBAJAJWBYVZ","TACXBAJAJZRYMA","TACXBAJAJIZUUN","TACXBAJAJGESYE","TACXBAJAJIPUSB","TACXBAJAJPFXZY","TACXBAJAJWUVCQ","TACXBAJAJDZFLB","TACXBAJAJVKQZO","TACXBAJAJOAEDR","TACXBAJAJBALST","TACXBAJAJCTFRP","TACXBAJAJRBKLT","TACXBAJAJZNAFW","TACXBAJAJJBIEL","TACXBAJAJCKJWG","TACXBAJAJCYIUI","TACXBAJAJJUWZK","TACXBAJAJOGIPB","TACXBAJAJPZUHW","TACXBAJAJMFTJN","TACXBAJAJQVWNM","TACXBAJAJLXDPJ","TACXBAJAJSTXGE","TACXBAJAJPOEXI","TACXBAJAJAEOVN","TACXBAJAJXWGXE","TACXBAJAJUYFTA","TACXBAJAJEXYXX","TACXBAJAJVFNAN","TACXBAJAJTTDAA","TACXBAJAJUQTQK","TACXBAJAJWUCMR","TACXBAJAJFZTVE","TACXBAJAJKFTYT","TACXBAJAJSNHUL","TACXBAJAJUZDRA","TACXBAJAJKMQXM","TACXBAJAJNDVWP","TACXBAJAJXPKNR","TACXBAJAJTSMIG","TACXBAJAJFAFQN","TACXBAJAJLIBNU","TACXBAJAJNNEYB","TACXBAJAJBTMVH","TACXBAJAJRYLCO","TACXBAJAJECKMB","TACXBAJAJOWTCW","TACXBAJAJYBSCK","TACXBAJAJXFZPS","TACXBAJAJCCTWT","TACXBAJAJJOKVX","TACXBAJAJVGKCT","TACXBAJAJEUROE","TACXBAJAJMGJKP","TACXBAJAJUDIJW","TACXBAJAJBFJBQ","TACXBAJAJNFRRF","TACXBAJAJIYWPW","TACXBAJAJDFVAG","TACXBAJAJIMZNO","TACXBAJAJRLEJB","TACXBAJAJAJUBH","TACXBAJAJAPRUK","TACXBAJAJAZPOM","TACXBAJAJWQDSX","TACXBAJAJOYGHA","TACXBAJAJGPUUO","TACXBAJAJJBRYF","TACXBAJAJWAQPW","TACXBAJAJSQYOK","TACXBAJAJFTNVY","TACXBAJAJMTKLH","TACXBAJAJYDGXS","TACXBAJAJCBDFH","TACXBAJAJCLWUQ","TACXBAJAJNHBOG","TACXBAJAJIFZMF","TACXBAJAJGFRMI","TACXBAJAJYVQKZ","TACXBAJAJECLQR","TACXBAJAJSLMUR","TACXBAJAJWHLSJ","TACXBAJAJMKOFJ","TACXBAJAJPOCLA","TACXBAJAJMHJLT","TACXBAJAJYMGAK","TACXBAJAJPWTAZ","TACXBAJAJCTYFU","TACXBAJAJZGWOL","TACXBAJAJGWBYJ","TACXBAJAJXKZAU","TACXBAJAJXAGSR","TACXBAJAJNRGVS","TACXBAJAJOKIPO","TACXBAJAJLZEMI","TACXBAJAJZFBNC","TACXBAJAJCJFYQ","TACXBAJAJQTJWY","TACXBAJAJKZAHU","TACXBAJAJAGLJR","TACXBAJAJQCWAL","TACXBAJAJWDOEQ","TACXBAJAJYXOSQ","TACXBAJAJAVQWT","TACXBAJAJWDAWV","TACXBAJAJITGTM","TACXBAJAJWGUBZ","TACXBAJAJTEOVQ","TACXBAJAJTEJAY","TACXBAJAJKJSLL","TACXBAJAJLMWYV","TACXBAJAJDGFDN","TACXBAJAJTCVSS","TACXBAJAJULZPC","TACXBAJAJHHMQT","TACXBAJAJWIVYM","TACXBAJAJSKYNB","TACXBAJAJGTRVZ","TACXBAJAJPQJFQ","TACXBAJAJWLXDP","TACXBAJAJRXGNI","TACXBAJAJSIXWT","TACXBAJAJDHTWX","TACXBAJAJAJXMG","TACXBAJAJLHNBC","TACXBAJAJARWUZ","TACXBAJAJTXDMX","TACXBAJAJYCUEP","TACXBAJAJRNGHV","TACXBAJAJMFHIV","TACXBAJAJRWZJT","TACXBAJAJJVGNP","TACXBAJAJOSBAQ","TACXBAJAJLSWTS","TACXBAJAJFACKP","TACXBAJAJWDQUN","TACXBAJAJBILQJ","TACXBAJAJNVCQH","TACXBAJAJZXUCG","TACXBAJAJMQIXG","TACXBAJAJJFNOU","TACXBAJAJJNBQQ","TACXBAJAJYOVJY","TACXBAJAJLCTZW","TACXBAJAJTZEPO","TACXBAJAJLZHRI","TACXBAJAJBOWRH","TACXBAJAJXQWCP","TACXBAJAJOKAXL","TACXBAJAJYAPUH","TACXBAJAJNUECT","TACXBAJAJQUNJU","TACXBAJAJKTFUX","TACXBAJAJRXQCX","TACXBAJAJAZHLG","TACXBAJAJOPJAA","TACXBAJAJFPHWS","TACXBAJAJWMJWS","TACXBAJAJFAFFC","TACXBAJAJYEWWA","TACXBAJAJBOKPM","TACXBAJAJQPEVL","TACXBAJAJIQBZI","TACXBAJAJNBJPY","TACXBAJAJFFTSG","TACXBAJAJBPZYP","TACXBAJAJXACSL","TACXBAJAJFGMFK","TACXBAJAJZZAXL","TACXBAJAJVTGMQ","TACXBAJAJUVWJP","TACXBAJAJGFGXZ","TACXBAJAJBTPQF","TACXBAJAJFYLSI","TACXBAJAJWWETE","TACXBAJAJXQJIC","TACXBAJAJRWWZZ","TACXBAJAJJLIYL","TACXBAJAJBUIWU","TACXBAJAJUXSVM","TACXBAJAJCKTXU","TACXBAJAJRAQRD","TACXBAJAJHCOEH","TACXBAJAJCABKP","TACXBAJAJLCCLQ","TACXBAJAJCXCAG","TACXBAJAJSGXSI","TACXBAJAJERPJC","TACXBAJAJVGQUB","TACXBAJAJJKUDW","TACXBAJAJUFTIN","TACXBAJAJTMAJS","TACXBAJAJIPRSE","TACXBAJAJGUIIN","TACXBAJAJKPIVJ","TACXBAJAJIMUTG","TACXBAJAJSBDCY","TACXBAJAJAFGUZ","TACXBAJAJJFKWX","TACXBAJAJMYRGZ","TACXBAJAJHHNXS","TACXBAJAJYXUMS","TACXBAJAJVXTBU","TACXBAJAJWMVEJ","TACXBAJAJDCZLA","TACXBAJAJIQMKT","TACXBAJAJWSWDW","TACXBAJAJZOEJF","TACXBAJAJUGFUR","TACXBAJAJNTDRZ","TACXBAJAJJUUYT","TACXBAJAJKBEHM","TACXBAJAJWFQYM","TACXBAJAJUPCAA","TACXBAJAJWUJVF","TACXBAJAJBDSCX","TACXBAJAJHUTZC","TACXBAJAJDHGQM","TACXBAJAJXNHFL","TACXBAJAJMMJIK","TACXBAJAJPJJDA","TACXBAJAJYHGMQ","TACXBAJAJNBIAF","TACXBAJAJNGVMZ","TACXBAJAJGWMKL","TACXBAJAJXFVKB","TACXBAJAJCOEVZ","TACXBAJAJAVIWD","TACXBAJAJMTRIM","TACXBAJAJYFILO","TACXBAJAJNDVBO","TACXBAJAJQBUBG","TACXBAJAJXFWXQ","TACXBAJAJXWANG","TACXBAJAJPCEXE","TACXBAJAJCUDFV","TACXBAJAJZUICR","TACXBAJAJRIKWK","TACXBAJAJGMLKS","TACXBAJAJKNUDO","TACXBAJAJHSAJH","TACXBAJAJJWUOS","TACXBAJAJILKYX","TACXBAJAJZUHET","TACXBAJAJBBWWG","TACXBAJAJCXMUL","TACXBAJAJKLBBY","TACXBAJAJSFNUE","TACXBAJAJUTPVU","TACXBAJAJTSALD","TACXBAJAJKAMXS","TACXBAJAJQOQJK","TACXBAJAJVKPUT","TACXBAJAJYJRGE","TACXBAJAJIGCFJ","TACXBAJAJRDRTE","TACXBAJAJJIZVU","TACXBAJAJZDENB","TACXBAJAJGGDZT","TACXBAJAJXROMZ","TACXBAJAJTXVVM","TACXBAJAJCENLZ","TACXBAJAJXIWUY","TACXBAJAJRMRTJ","TACXBAJAJIVSAI","TACXBAJAJUUWRW","TACXBAJAJMLCFS","TACXBAJAJVOEBK","TACXBAJAJKAVKB","TACXBAJAJRWXHM","TACXBAJAJIMWDY","TACXBAJAJPMALS","TACXBAJAJZXFZW","TACXBAJAJNOGKB","TACXBAJAJZIBJG","TACXBAJAJIQNFJ","TACXBAJAJAFLQK","TACXBAJAJCOTGQ","TACXBAJAJBCKCH","TACXBAJAJBABKH","TACXBAJAJWEUOS","TACXBAJAJWDVHH","TACXBAJAJCROIR","TACXBAJAJLUCUR","TACXBAJAJVLCVQ","TACXBAJAJRVXNR","TACXBAJAJFENKV","TACXBAJAJXLIGI","TACXBAJAJPRXBS","TACXBAJAJRCIRH","TACXBAJAJGSHBV","TACXBAJAJUGHUW","TACXBAJAJCKSCY","TACXBAJAJYCZUD","TACXBAJAJZVPJG","TACXBAJAJDLZTM","TACXBAJAJKCUKS","TACXBAJAJBZLOB","TACXBAJAJHMPZX","TACXBAJAJMALOW","TACXBAJAJAISBN","TACXBAJAJAHOCB","TACXBAJAJWHEHC","TACXBAJAJNCWWY","TACXBAJAJGSQDD","TACXBAJAJCABMS","TACXBAJAJRYDZQ","TACXBAJAJNRYCH","TACXBAJAJKQHCC","TACXBAJAJOQSGG","TACXBAJAJXJKDU","TACXBAJAJZLGEY","TACXBAJAJLSTRT","TACXBAJAJOHKBL","TACXBAJAJBSJGI","TACXBAJAJRNTQM","TACXBAJAJNECZN","TACXBAJAJZCZOL","TACXBAJAJHMAEY","TACXBAJAJBELKC","TACXBAJAJLLKCM","TACXBAJAJPVQOG","TACXBAJAJSWWGA","TACXBAJAJDZPDT","TACXBAJAJMBJFX","TACXBAJAJQTTVX","TACXBAJAJFWIHK","TACXBAJAJAURCB","TACXBAJAJNHAMF","TACXBAJAJFZJDO","TACXBAJAJHHXJF","TACXBAJAJKOWBG","TACXBAJAJASRGI","TACXBAJAJUGYXY","TACXBAJAJWMCGD","TACXBAJAJLPRZE","TACXBAJAJCNHYD","TACXBAJAJNRBIK","TACXBAJAJRGQBC","TACXBAJAJHYVOK","TACXBAJAJEKXZJ","TACXBAJAJNVBBF","TACXBAJAJEMTUW","TACXBAJAJIELOH","TACXBAJAJIAFTS","TACXBAJAJTMPWJ","TACXBAJAJDCHWF","TACXBAJAJTSXSE","TACXBAJAJITWFY","TACXBAJAJKAMCV","TACXBAJAJNUPEW","TACXBAJAJRLVTH","TACXBAJAJJVXAQ","TACXBAJAJOCKET","TACXBAJAJBTAUG","TACXBAJAJXMNEC","TACXBAJAJJSNTR","TACXBAJAJIPARP","TACXBAJAJJZYRQ","TACXBAJAJLLJHG","TACXBAJAJUJOSX","TACXBAJAJOEXCY","TACXBAJAJXXWCV","TACXBAJAJFIXYY","TACXBAJAJTFSAC","TACXBAJAJJQCMI","TACXBAJAJPNSHQ","TACXBAJAJYKIZY","TACXBAJAJKWDXA","TACXBAJAJZBWMX","TACXBAJAJLDNDJ","TACXBAJAJQVWRE","TACXBAJAJAYYKX","TACXBAJAJQIDLV","TACXBAJAJXSLJR","TACXBAJAJZQOSH","TACXBAJAJICUXV","TACXBAJAJAEJKM","TACXBAJAJQQQUA","TACXBAJAJYOZTM","TACXBAJAJOKMHV","TACXBAJAJDJTLF","TACXBAJAJCUMYO","TACXBAJAJXXQVV","TACXBAJAJLGKHL","TACXBAJAJLDKHB","TACXBAJAJGLDZP","TACXBAJAJZPIHB","TACXBAJAJXQBDC","TACXBAJAJJPMSO","TACXBAJAJYCFJC","TACXBAJAJMOTVL","TACXBAJAJYDXHL","TACXBAJAJWNCXH","TACXBAJAJBFLUG","TACXBAJAJUBLEX","TACXBAJAJOMAKS","TACXBAJAJMMFVL","TACXBAJAJSSRQK","TACXBAJAJUHTLM","TACXBAJAJRPSST","TACXBAJAJWVDUS","TACXBAJAJJMPHE","TACXBAJAJWPIYE","TACXBAJAJMGYNC","TACXBAJAJJVVTQ","TACXBAJAJGOSXS","TACXBAJAJHHWXY","TACXBAJAJXGBXS","TACXBAJAJOCJQN","TACXBAJAJAMLSH","TACXBAJAJSATAS","TACXBAJAJKWTYL","TACXBAJAJSYSVW","TACXBAJAJDGKEG","TACXBAJAJIZWRG","TACXBAJAJOMDBJ","TACXBAJAJHKHHJ","TACXBAJAJZMFSQ","TACXBAJAJMPBBX","TACXBAJAJLAJDF","TACXBAJAJFKOCU","TACXBAJAJRHCKF","TACXBAJAJCFGEC","TACXBAJAJMEGPZ","TACXBAJAJWWOJD","TACXBAJAJYHTHJ","TACXBAJAJZSGXD","TACXBAJAJVUSZZ","TACXBAJAJZPQNF","TACXBAJAJRIURM","TACXBAJAJGLXXP","TACXBAJAJPLNKI","TACXBAJAJUIWLL","TACXBAJAJGJJTF","TACXBAJAJIACJU","TACXBAJAJYGTYQ","TACXBAJAJDFUKS","TACXBAJAJIOGQF","TACXBAJAJMEHHR","TACXBAJAJXSBWA","TACXBAJAJXWZST","TACXBAJAJVLJTV","TACXBAJAJOMZLC","TACXBAJAJVOOQQ","TACXBAJAJCYTRI","TACXBAJAJIBEGI","TACXBAJAJBPTCK","TACXBAJAJKJKYO","TACXBAJAJMSJPD","TACXBAJAJNZYBR","TACXBAJAJOTVGY","TACXBAJAJHLRZD","TACXBAJAJDQOOW","TACXBAJAJZJVBR","TACXBAJAJCIWTF","TACXBAJAJENQAU","TACXBAJAJYFLYP","TACXBAJAJWGLOY","TACXBAJAJGOHSN","TACXBAJAJXERWS","TACXBAJAJQNMLE","TACXBAJAJBNEOW","TACXBAJAJQLTSV","TACXBAJAJEBDFW","TACXBAJAJHUXUY","TACXBAJAJRFZCY","TACXBAJAJWCBIT","TACXBAJAJLMSDJ","TACXBAJAJPVNUU","TACXBAJAJSYSWT","TACXBAJAJQFPNI","TACXBAJAJYEPNI","TACXBAJAJOLNLT","TACXBAJAJROERF","TACXBAJAJXVOKH","TACXBAJAJFWAEN","TACXBAJAJMZBBY","TACXBAJAJUZQQU","TACXBAJAJSBLHW","TACXBAJAJGGZCW","TACXBAJAJUHDCD","TACXBAJAJVKWAY","TACXBAJAJINHLY","TACXBAJAJZUZPJ","TACXBAJAJDRYNQ","TACXBAJAJZAAUE","TACXBAJAJNSNTH","TACXBAJAJDADZA","TACXBAJAJBVXXI","TACXBAJAJLJTQW","TACXBAJAJQQCKT","TACXBAJAJCUQGW","TACXBAJAJAVWNR","TACXBAJAJXXQXQ","TACXBAJAJOLSEE","TACXBAJAJGESMK","TACXBAJAJYGLHF","TACXBAJAJXXMLI","TACXBAJAJUBSSR","TACXBAJAJEKUSO","TACXBAJAJAQTOJ","TACXBAJAJBMFQS","TACXBAJAJWGJWH","TACXBAJAJRPRAF","TACXBAJAJYTRLO","TACXBAJAJCKTGY","TACXBAJAJFTDYH","TACXBAJAJRINDS","TACXBAJAJGUDGN","TACXBAJAJWGVSB","TACXBAJAJRVAGN","TACXBAJAJOVMOM","TACXBAJAJWCFBZ","TACXBAJAJGYRKO","TACXBAJAJJOCVU","TACXBAJAJSFQQR","TACXBAJAJQNVYE","TACXBAJAJKZPQY","TACXBAJAJCDCDN","TACXBAJAJQXYXS","TACXBAJAJKJAGV","TACXBAJAJTCXFJ","TACXBAJAJMPGVP","TACXBAJAJKCPNM","TACXBAJAJIXXNV","TACXBAJAJBBQPI","TACXBAJAJGLTBO","TACXBAJAJFWHYH","TACXBAJAJFAGYC","TACXBAJAJOWQUI","TACXBAJAJCXYBY","TACXBAJAJARLCQ","TACXBAJAJUIKFP","TACXBAJAJBZVXE","TACXBAJAJCLMCK","TACXBAJAJIFMXW","TACXBAJAJQQDQK","TACXBAJAJUFVYI","TACXBAJAJIXUVG","TACXBAJAJQMFRO","TACXBAJAJQGOWE","TACXBAJAJXDMLX","TACXBAJAJYVMGX","TACXBAJAJFOHPG","TACXBAJAJIDZPJ","TACXBAJAJEGLKM","TACXBAJAJOAANM","TACXBAJAJBZXCO","TACXBAJAJNUUIM","TACXBAJAJQNHFK","TACXBAJAJXGPJS","TACXBAJAJBPKRU","TACXBAJAJFJKOL","TACXBAJAJLEDIZ","TACXBAJAJZPHES","TACXBAJAJZHEHF","TACXBAJAJFAKEY","TACXBAJAJFYEUZ","TACXBAJAJAPSVG","TACXBAJAJRDZKO","TACXBAJAJZNFTR","TACXBAJAJAVYUH","TACXBAJAJXOYMV","TACXBAJAJQKIHE","TACXBAJAJMVWWU","TACXBAJAJVLNDD","TACXBAJAJRHVGY","TACXBAJAJXQDUE","TACXBAJAJCETBA","TACXBAJAJBIMRC","TACXBAJAJXRVVC","TACXBAJAJSYCSQ","TACXBAJAJQEZYX","TACXBAJAJSOEXV","TACXBAJAJDKSNN","TACXBAJAJCJREX","TACXBAJAJJDZZW","TACXBAJAJHPNIB","TACXBAJAJZQXZU","TACXBAJAJYTZEO","TACXBAJAJIOLKZ","TACXBAJAJUXWLT","TACXBAJAJJEEXX","TACXBAJAJWGBUX","TACXBAJAJGMYUH","TACXBAJAJZLQAA","TACXBAJAJBZFEG","TACXBAJAJLBLPS","TACXBAJAJSMIOD","TACXBAJAJLUIZU","TACXBAJAJUCBBT","TACXBAJAJHHXMR","TACXBAJAJPSKXX","TACXBAJAJEDWJF","TACXBAJAJSGTUI","TACXBAJAJPKELD","TACXBAJAJCQKWW","TACXBAJAJKEIAX","TACXBAJAJOYYAX","TACXBAJAJMSVKB","TACXBAJAJEFKAA","TACXBAJAJNNZFA","TACXBAJAJCBUMW","TACXBAJAJPFSNK","TACXBAJAJPQUQN","TACXBAJAJZRMSL","TACXBAJAJXEFOG","TACXBAJAJDVIJF","TACXBAJAJDJZHJ","TACXBAJAJRQLPQ","TACXBAJAJOWONH","TACXBAJAJECMSM","TACXBAJAJZRLLU","TACXBAJAJJJTVZ","TACXBAJAJNVELJ","TACXBAJAJKBWAH","TACXBAJAJRLMLM","TACXBAJAJAWJHT","TACXBAJAJZQSKE","TACXBAJAJTRITU","TACXBAJAJDEAUR","TACXBAJAJRBWIR","TACXBAJAJKNRYJ","TACXBAJAJIJKKE","TACXBAJAJSBJJH","TACXBAJAJAERNO","TACXBAJAJREMHS","TACXBAJAJBZPIF","TACXBAJAJBIQEM","TACXBAJAJLNDCZ","TACXBAJAJVOLRW","TACXBAJAJFZIZZ","TACXBAJAJLFTWP","TACXBAJAJTCQDQ","TACXBAJAJFKFPR","TACXBAJAJRKRNX","TACXBAJAJUULRL","TACXBAJAJRFRFB","TACXBAJAJRLLRQ","TACXBAJAJFHATO","TACXBAJAJQBBCI","TACXBAJAJVSIUE","TACXBAJAJRGQWY","TACXBAJAJGHZQP","TACXBAJAJRQBYK","TACXBAJAJYSRBQ","TACXBAJAJBXDTS","TACXBAJAJAUDDU","TACXBAJAJFKHFO","TACXBAJAJEZUSP","TACXBAJAJDJGAS","TACXBAJAJWQREW","TACXBAJAJLDHJI","TACXBAJAJBSSCI","TACXBAJAJQCRQI","TACXBAJAJQPOET","TACXBAJAJLMEGG","TACXBAJAJSTNLE","TACXBAJAJLSYSY","TACXBAJAJZUBHJ","TACXBAJAJTBWXT","TACXBAJAJONQGB","TACXBAJAJQTASS","TACXBAJAJPGVAU","TACXBAJAJBTTVK","TACXBAJAJKPIDR","TACXBAJAJBYZKS","TACXBAJAJZTOMO","TACXBAJAJXPLKF","TACXBAJAJFWBQN","TACXBAJAJTRDVO","TACXBAJAJSPFIM","TACXBAJAJPOGTS","TACXBAJAJFOHON","TACXBAJAJMDRVK","TACXBAJAJRTBOZ","TACXBAJAJJCBBN","TACXBAJAJQOHLX","TACXBAJAJLEZXJ","TACXBAJAJXPLDW","TACXBAJAJJQDDL","TACXBAJAJCXRCJ","TACXBAJAJVOOTT","TACXBAJAJPBCLK","TACXBAJAJMCJDZ","TACXBAJAJXMUJN","TACXBAJAJCDFZJ","TACXBAJAJGXYWU","TACXBAJAJQBZEL","TACXBAJAJTYZJD","TACXBAJAJJBYIH","TACXBAJAJQDHSO","TACXBAJAJNFTJZ","TACXBAJAJGFACH","TACXBAJAJGFVMC","TACXBAJAJSMEUL","TACXBAJAJCAUJC","TACXBAJAJBHEMT","TACXBAJAJBOMIY","TACXBAJAJQYMWH","TACXBAJAJIZMCM","TACXBAJAJUAFAR","TACXBAJAJEIIKB","TACXBAJAJVOMTZ","TACXBAJAJOJHPY","TACXBAJAJERECV","TACXBAJAJTOZQE","TACXBAJAJLOLUK","TACXBAJAJNQEZC","TACXBAJAJFUECG","TACXBAJAJLYGXQ","TACXBAJAJXVNFM","TACXBAJAJRXCXM","TACXBAJAJJEIFV","TACXBAJAJRKVIE","TACXBAJAJTLPMY","TACXBAJAJMJEYL","TACXBAJAJBBPOL","TACXBAJAJHEHVH","TACXBAJAJCZHJM","TACXBAJAJBHNRA","TACXBAJAJNKFNT","TACXBAJAJMZGRS","TACXBAJAJFPUBL","TACXBAJAJZFKNS","TACXBAJAJDPYOT","TACXBAJAJVCYXK","TACXBAJAJVMWDK","TACXBAJAJLJIMH","TACXBAJAJWYOSQ","TACXBAJAJRNZGX","TACXBAJAJFALNH","TACXBAJAJOTLYH","TACXBAJAJQDOOQ","TACXBAJAJCUIUJ","TACXBAJAJZAOLS","TACXBAJAJTIXOP","TACXBAJAJKUVSV","TACXBAJAJAXPKZ","TACXBAJAJJSKMG","TACXBAJAJCSTMH","TACXBAJAJUWVDT","TACXBAJAJYQKQA","TACXBAJAJCYOHW","TACXBAJAJIPRZE","TACXBAJAJIEFFM","TACXBAJAJQQUHD","TACXBAJAJUEXDA","TACXBAJAJAOOGM","TACXBAJAJZBLEQ","TACXBAJAJJFGTE","TACXBAJAJKHHBI","TACXBAJAJOPXRX","TACXBAJAJTSITX","TACXBAJAJAZKKB","TACXBAJAJBMAAZ","TACXBAJAJRZQRM","TACXBAJAJWBKHJ","TACXBAJAJJXUMH","TACXBAJAJILBYY","TACXBAJAJRHJQS","TACXBAJAJNBXLB","TACXBAJAJINEZO","TACXBAJAJJNDWL","TACXBAJAJBFLVJ","TACXBAJAJTYABH","TACXBAJAJSLCNZ","TACXBAJAJHSCMW","TACXBAJAJQJBKH","TACXBAJAJTYFZN","TACXBAJAJNTABU","TACXBAJAJFZYVU","TACXBAJAJBMYWX","TACXBAJAJWNGZA","TACXBAJAJKZXWT","TACXBAJAJFKCDH","TACXBAJAJLOUOK","TACXBAJAJEBTKI","TACXBAJAJTWHIM","TACXBAJAJOQJPH","TACXBAJAJEQSAX","TACXBAJAJCUDHH","TACXBAJAJDRDAH","TACXBAJAJYEOYY","TACXBAJAJXRMMZ","TACXBAJAJWICGZ","TACXBAJAJWXVCL","TACXBAJAJUJLDA","TACXBAJAJELTDH","TACXBAJAJGHYCH","TACXBAJAJXYMGT","TACXBAJAJPEUMB","TACXBAJAJVKGIX","TACXBAJAJFVUMC","TACXBAJAJHMHYS","TACXBAJAJDGECO","TACXBAJAJXFLGS","TACXBAJAJVKBDU","TACXBAJAJLSKKR","TACXBAJAJFSUDU","TACXBAJAJCTFEA","TACXBAJAJMFCUW","TACXBAJAJPDZIB","TACXBAJAJGIQMW","TACXBAJAJCDMNT","TACXBAJAJVIYTL","TACXBAJAJOVRBW","TACXBAJAJQLWLY","TACXBAJAJUPAEZ","TACXBAJAJLGFRP","TACXBAJAJBISFZ","TACXBAJAJRYARY","TACXBAJAJTNEGT","TACXBAJAJGXLKJ","TACXBAJAJZUHOQ","TACXBAJAJOVSCS","TACXBAJAJGPSKO","TACXBAJAJPHKFJ","TACXBAJAJYZQMF","TACXBAJAJYZIAW","TACXBAJAJSGDQK","TACXBAJAJGHWSH","TACXBAJAJOQXBK","TACXBAJAJWZXHT","TACXBAJAJDBRXA","TACXBAJAJSZUXV","TACXBAJAJMGOSU","TACXBAJAJIYMFA","TACXBAJAJHBIVG","TACXBAJAJKQJWC","TACXBAJAJXUHFE","TACXBAJAJQMHQI","TACXBAJAJWUFLJ","TACXBAJAJTOFAG","TACXBAJAJEAHDH","TACXBAJAJZSAGG","TACXBAJAJRFRZC","TACXBAJAJOJEOF","TACXBAJAJMWJLQ","TACXBAJAJPQBOR","TACXBAJAJYRONI","TACXBAJAJULHSP","TACXBAJAJCVBSJ","TACXBAJAJDCVVF","TACXBAJAJYPRQS","TACXBAJAJCUTFP","TACXBAJAJZENSV","TACXBAJAJWKZWO","TACXBAJAJWMNQW","TACXBAJAJODFFZ","TACXBAJAJNVVDP","TACXBAJAJZDAVR","TACXBAJAJPKWJD","TACXBAJAJJXQTX","TACXBAJAJZCIDJ","TACXBAJAJVJXCI","TACXBAJAJOFXZV","TACXBAJAJRBREE","TACXBAJAJYPBAE","TACXBAJAJAIDQS","TACXBAJAJSRJFM","TACXBAJAJAKJJI","TACXBAJAJEEYET","TACXBAJAJFKQAF","TACXBAJAJWCEHI","TACXBAJAJENRBC","TACXBAJAJLWXYQ","TACXBAJAJUJAMU","TACXBAJAJNUDIC","TACXBAJAJFACQE","TACXBAJAJOFTSI","TACXBAJAJDCUCW","TACXBAJAJHGVML","TACXBAJAJUQGFS","TACXBAJAJKZMMW","TACXBAJAJTLRDE","TACXBAJAJCUPCW","TACXBAJAJCWYGM","TACXBAJAJHRPRY","TACXBAJAJQJSZD","TACXBAJAJZCYYC","TACXBAJAJXJULE","TACXBAJAJTSJFR","TACXBAJAJMARJL","TACXBAJAJNDDKU","TACXBAJAJKCIIT","TACXBAJAJRRJRW","TACXBAJAJZRBQL","TACXBAJAJCRMGL","TACXBAJAJYXCJE","TACXBAJAJSAWTT","TACXBAJAJKUJPA","TACXBAJAJNYXWI","TACXBAJAJRTGLN","TACXBAJAJJGLNU","TACXBAJAJKBIJE","TACXBAJAJGFBXQ","TACXBAJAJWVCGP","TACXBAJAJEDFGO","TACXBAJAJWBENU","TACXBAJAJXYKJE","TACXBAJAJHCIZN"

    ]

    BATCH_SIZE = 100
    TOTAL_COUPONS = len(COUPON_LIST)
    # COUPON_LENGTH = 8

    iterations = TOTAL_COUPONS//BATCH_SIZE if TOTAL_COUPONS > BATCH_SIZE else 1
    counter = 0
    start_time = time.time()
    apiClient = SyncAPIClient.getApiClient()
    while counter <= iterations:
        try:
            if counter == iterations:
                coupons = COUPON_LIST[counter*BATCH_SIZE:TOTAL_COUPONS]
            else:
                coupons = COUPON_LIST[counter *
                                      BATCH_SIZE:(counter+1)*BATCH_SIZE]

            payload = {
                "discount_codes": [{"code": coupon} for coupon in coupons]
            }
            final_url = API_URL.format(price_rule_id=price_rule_id)
            response = apiClient.runAdhocTask(RequestTask(method="POST", url=final_url, headers=headers,
                                                          payload=payload, params=params, priority=1))
            if response.status_code == 201:
                batch_id = response.json()["discount_code_creation"]["id"]
                batch_url = url + "/price_rules/{price_rule_id}/batch/{batch_id}.json".format(
                    price_rule_id=price_rule_id, batch_id=batch_id)
                iter = 0
                while True:
                    try:
                        response_batch = apiClient.runAdhocTask(
                            RequestTask(batch_url, headers=headers, method="GET"), waitTime=2 if iter == 0 else 0.51)
                        if response_batch.status_code == 200 and response_batch.json()["discount_code_creation"]["status"] == "completed":
                            print("Created", (counter+1) *
                                  BATCH_SIZE, "of", TOTAL_COUPONS)
                            break
                        else:
                            print("Status Code:", response_batch.status_code, "| Status:",
                                  response_batch.json()["discount_code_creation"]["status"], "| API Rate: ", response_batch.headers['X-Shopify-Shop-Api-Call-Limit'])
                        iter += 1
                        # time.sleep()
                    except Exception as e:
                        print("Status Code:", response.status_code, "| Error:", e)
                counter += 1
        except Exception as e:
            print("Error:", e)
    end_time = time.time()
    print("Total Time Taken:", end_time-start_time, "sec")
